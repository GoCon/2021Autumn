---
key: io-fs-fs-testability-abstraction
title: io/fs.FS for testability. io/fs.FS for abstraction.
id: io-fs-fs-testability-abstraction
format: conference
talkType: ""
allroom: false
speakers:
- k1low
---
Go 1.16から追加されたio/fsパッケージが提供しているインターフェースについて、皆さんはどのような目的で活用していますか？

私は、主に2つの目的で活用しています。1つはテスト容易性（テスタビリティ）、もう1つはファイルシステムとしての抽象化です。

本発表では、具体的な事例を元に上記の2つの目的での使い方を紹介します。
また、fs.FSインターフェースを使ったことで失敗した事例も紹介したいと思います。

本発表を通じてio/fsのインターフェースの利用イメージを持ってもらえれば嬉しいです。

---

Go 1.16から追加されたio/fsパッケージでは、fs.FSをはじめとしていくつかのインターフェースが提供されています。

全てはReadOnlyなメソッドのみで提供されており、一見すると使いどころが難しそうに見えます（少なくとも私には最初そう見えました）。

私は、主に2つの目的で活用しています。

1つはテスト容易性（テスタビリティ）のためです。ファイルシステムから読み込んで何かをする処理を、そのままOSのファイルシステムを使うのではなく、 fs.FS インターフェースを噛ませることで、テスト時には testing/fstest パッケージでスタブ化してテストが可能です。

もう1つはファイルシステムとしての抽象化です。これはLinuxにおける様々な要素のファイルシステムとしての抽象化（例えばprocfs）を知っていれば、想像がしやすいのではないでしょうか？

本発表では、上記2つの目的それぞれの用途における、io/fsパッケージのインターフェースの利用事例を紹介します。

また、io/fsパッケージが提供しているインターフェースを組み込んだことで失敗した事例も紹介します。

本発表を通じてio/fsのインターフェースの利用イメージを持ってもらえれば嬉しいです。